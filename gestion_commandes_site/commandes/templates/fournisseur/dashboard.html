{% extends "base.html" %}
{% block content %}
<h1>Tableau de bord fournisseur</h1>
<div class="mb-3">
  <span class="fw-bold">Bonjour {{ user.fournisseur_profile.nom }}</span>
</div>

<div class="row g-3 mb-4">
  <div class="col-6 col-md-3">
    <div class="card text-bg-light">
      <div class="card-body">
        <div class="fw-semibold">Produits</div>
        <div class="display-6">{{ kpi_total_produits }}</div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card text-bg-light">
      <div class="card-body">
        <div class="fw-semibold">Commandes</div>
        <div class="display-6">{{ kpi_commandes_total }}</div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card text-bg-light">
      <div class="card-body">
        <div class="fw-semibold">Livraisons</div>
        <div class="display-6">{{ kpi_livraisons_total }}</div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card text-bg-light">
      <div class="card-body">
        <div class="fw-semibold">En attente</div>
        <div class="display-6">{{ kpi_livraisons_en_attente }}</div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card text-bg-light">
      <div class="card-body">
        <div class="fw-semibold">Qté vendue</div>
        <div class="display-6">{{ kpi_total_qte_vendue }}</div>
      </div>
    </div>
  </div>
  <div class="col-12"></div>
  <div class="col-auto">
    <a class="btn btn-outline-success" href="{% url 'commandes:ventes' %}">Voir ventes</a>
  </div>
  <div class="col-auto">
    <a class="btn btn-outline-info" href="{% url 'commandes:commandes-fournisseur' %}">Voir commandes</a>
  </div>
  <div class="col-auto">
    <a class="btn btn-outline-warning" href="{% url 'commandes:livraisons-fournisseur' %}">Voir livraisons</a>
  </div>
</div>
<div class="btn-group mb-4" role="group">
  <a class="btn btn-outline-primary" href="{% url 'commandes:dashboard' %}">Produits</a>
  <a class="btn btn-outline-success" href="{% url 'commandes:ventes' %}">Ventes</a>
  <a class="btn btn-outline-info" href="{% url 'commandes:commandes-fournisseur' %}">Commandes</a>
  <a class="btn btn-outline-warning" href="{% url 'commandes:livraisons-fournisseur' %}">Livraisons</a>
</div>

<h2>Mes produits</h2>
<div class="mb-3">
  <a href="{% url 'commandes:produit_add' %}" class="btn btn-sm btn-primary">Ajouter un produit</a>
  </div>
<div class="row">
  {% for p in produits %}
  <div class="col-md-4">
    <div class="card mb-3">
      {% if p.images %}
      <img src="{{ p.images.url }}" class="card-img-top" style="height:180px; object-fit:cover;">
      {% endif %}
      <div class="card-body">
        <h5>{{ p.nom }}</h5>
        <p><strong>{{ p.prix }} Ar</strong></p>
        <a href="{% url 'commandes:produit_edit' p.pk %}" class="btn btn-sm btn-primary">Éditer</a>
        <a href="{% url 'commandes:produit_delete' p.pk %}" class="btn btn-sm btn-outline-danger">Supprimer</a>
      </div>
    </div>
  </div>
  {% empty %}
    <p>Aucun produit pour le moment.</p>
  {% endfor %}
</div>
{% endblock %}